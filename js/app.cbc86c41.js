(function(){var e={3012:function(e,t,n){"use strict";var a=n(9242),r=n(6215),s=n.n(r),l=n(3396);const o={class:"container max-w-6xl mx-auto px-4 grow"};function d(e,t,n,a,r,s){const d=(0,l.up)("NavBar"),i=(0,l.up)("router-view"),u=(0,l.up)("Footer");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(d),(0,l._)("main",o,[(0,l.Wm)(i)]),(0,l.Wm)(u)],64)}var i=n(7139);const u={class:"bg-white shadow-lg"},c={class:"max-w-6xl mx-auto px-4"},p={class:"flex justify-between"},m={class:"hidden md:flex space-x-7"},y={class:"flex items-center space-x-1"},f=(0,l.Uk)(" Home "),v=(0,l.Uk)(" Client POV "),w=(0,l.Uk)(" Seller POV "),g=(0,l.Uk)(" Delivery POV "),b=(0,l.Uk)(" Dashboard "),h={class:"flex items-center space-x-3"},x={key:0,class:"text-black text-sm font-semibold w-48 md:w-full truncate"},T={key:1,class:"font-semibold text-sm text-red-500 italic hover:underline",href:"https://metamask.io/",target:"_blank"},_={class:"md:hidden flex items-center py-4"},k=(0,l._)("svg",{class:"w-6 h-6 hover:text-yellow-600","x-show":"!showMenu",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,l._)("path",{d:"M4 6h16M4 12h16M4 18h16"})],-1),C=[k],O={class:"hidden mobile-menu"},S={class:""},A=(0,l.Uk)(" Home "),W=(0,l.Uk)(" Client POV "),D=(0,l.Uk)(" Seller POV "),I=(0,l.Uk)(" Delivery POV "),U=(0,l.Uk)(" Dashboard ");function V(e,t,n,a,r,s){const o=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("nav",u,[(0,l._)("div",c,[(0,l._)("div",p,[(0,l._)("div",m,[(0,l._)("div",y,[(0,l.Wm)(o,{to:`${a.publicPath}/`,class:"py-4 px-2 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[f])),_:1},8,["to"]),(0,l.Wm)(o,{to:`${a.publicPath}/client`,class:"py-4 px-2 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[v])),_:1},8,["to"]),(0,l.Wm)(o,{to:`${a.publicPath}/seller`,class:"py-4 px-2 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[w])),_:1},8,["to"]),(0,l.Wm)(o,{to:`${a.publicPath}/delivery`,class:"py-4 px-2 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[g])),_:1},8,["to"]),(0,l.Wm)(o,{to:`${a.publicPath}/dashboard`,class:"py-4 px-2 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[b])),_:1},8,["to"])])]),(0,l._)("div",h,[a.address?((0,l.wg)(),(0,l.iD)("span",x,(0,i.zw)(a.address),1)):((0,l.wg)(),(0,l.iD)("a",T,"Use a web3 enabled browser"))]),(0,l._)("div",_,[(0,l._)("button",{class:"outline-none mobile-menu-button",onClick:t[0]||(t[0]=e=>a.toggleMobileMenu())},C)])])]),(0,l._)("div",O,[(0,l._)("ul",S,[(0,l._)("li",null,[(0,l.Wm)(o,{to:`${a.publicPath}/`,class:"block text-sm px-2 py-4 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[A])),_:1},8,["to"])]),(0,l._)("li",null,[(0,l.Wm)(o,{to:`${a.publicPath}/client`,class:"block text-sm px-2 py-4 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[W])),_:1},8,["to"])]),(0,l._)("li",null,[(0,l.Wm)(o,{to:`${a.publicPath}/seller`,class:"block text-sm px-2 py-4 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[D])),_:1},8,["to"])]),(0,l._)("li",null,[(0,l.Wm)(o,{to:`${a.publicPath}/delivery`,class:"block text-sm px-2 py-4 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[I])),_:1},8,["to"])]),(0,l._)("li",null,[(0,l.Wm)(o,{to:`${a.publicPath}/dashboard`,class:"block text-sm px-2 py-4 text-gray-700 font-semibold hover:text-yellow-600 transition duration-100"},{default:(0,l.w5)((()=>[U])),_:1},8,["to"])])])])])}var j=n(4870),F=n(1259),M=n.n(F),B=n(6796),z=n(2956),q=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_eurTnoContract","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"deliveryFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"collateral","type":"uint256"},{"indexed":true,"internalType":"enum OrderFactory.OrderStatus","name":"status","type":"uint8"},{"indexed":false,"internalType":"address","name":"client","type":"address"},{"indexed":false,"internalType":"address","name":"seller","type":"address"},{"indexed":false,"internalType":"address","name":"deliveryService","type":"address"},{"indexed":false,"internalType":"string","name":"orderContentsUrl","type":"string"},{"indexed":false,"internalType":"string","name":"originZipCode","type":"string"},{"indexed":false,"internalType":"string","name":"destinationZipCode","type":"string"},{"indexed":false,"internalType":"bool","name":"waitOnReady","type":"bool"}],"name":"ApprovedOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"deliveryFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"collateral","type":"uint256"},{"indexed":false,"internalType":"enum OrderFactory.OrderStatus","name":"status","type":"uint8"},{"indexed":true,"internalType":"address","name":"client","type":"address"},{"indexed":true,"internalType":"address","name":"seller","type":"address"},{"indexed":true,"internalType":"address","name":"deliveryService","type":"address"},{"indexed":false,"internalType":"string","name":"orderContentsUrl","type":"string"},{"indexed":false,"internalType":"string","name":"originZipCode","type":"string"},{"indexed":false,"internalType":"string","name":"destinationZipCode","type":"string"},{"indexed":false,"internalType":"bool","name":"waitOnReady","type":"bool"}],"name":"OrderStatusChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"uint256","name":"_orderId","type":"uint256"}],"name":"acceptOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderId","type":"uint256"},{"internalType":"string","name":"sellerZipCode","type":"string"},{"internalType":"string","name":"clientZipCode","type":"string"},{"internalType":"uint256","name":"_deliveryFee","type":"uint256"},{"internalType":"uint256","name":"_collateral","type":"uint256"},{"internalType":"bool","name":"_waitOnReady","type":"bool"}],"name":"approveOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderId","type":"uint256"}],"name":"cancelOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderId","type":"uint256"}],"name":"completeOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"eurTnoContract","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"getApprovedOrders","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deliveryFee","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"enum OrderFactory.OrderStatus","name":"status","type":"uint8"},{"internalType":"address","name":"client","type":"address"},{"internalType":"address","name":"seller","type":"address"},{"internalType":"address","name":"deliveryService","type":"address"},{"internalType":"string","name":"orderContentsUrl","type":"string"},{"internalType":"string","name":"originZipCode","type":"string"},{"internalType":"string","name":"destinationZipCode","type":"string"},{"internalType":"bool","name":"waitOnReady","type":"bool"}],"internalType":"struct OrderFactory.Order[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"_client","type":"address"}],"name":"getClientOrderCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"_client","type":"address"}],"name":"getOrdersByClient","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deliveryFee","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"enum OrderFactory.OrderStatus","name":"status","type":"uint8"},{"internalType":"address","name":"client","type":"address"},{"internalType":"address","name":"seller","type":"address"},{"internalType":"address","name":"deliveryService","type":"address"},{"internalType":"string","name":"orderContentsUrl","type":"string"},{"internalType":"string","name":"originZipCode","type":"string"},{"internalType":"string","name":"destinationZipCode","type":"string"},{"internalType":"bool","name":"waitOnReady","type":"bool"}],"internalType":"struct OrderFactory.Order[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"_deliveryService","type":"address"}],"name":"getOrdersByDeliveryService","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deliveryFee","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"enum OrderFactory.OrderStatus","name":"status","type":"uint8"},{"internalType":"address","name":"client","type":"address"},{"internalType":"address","name":"seller","type":"address"},{"internalType":"address","name":"deliveryService","type":"address"},{"internalType":"string","name":"orderContentsUrl","type":"string"},{"internalType":"string","name":"originZipCode","type":"string"},{"internalType":"string","name":"destinationZipCode","type":"string"},{"internalType":"bool","name":"waitOnReady","type":"bool"}],"internalType":"struct OrderFactory.Order[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"_seller","type":"address"}],"name":"getOrdersBySeller","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deliveryFee","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"enum OrderFactory.OrderStatus","name":"status","type":"uint8"},{"internalType":"address","name":"client","type":"address"},{"internalType":"address","name":"seller","type":"address"},{"internalType":"address","name":"deliveryService","type":"address"},{"internalType":"string","name":"orderContentsUrl","type":"string"},{"internalType":"string","name":"originZipCode","type":"string"},{"internalType":"string","name":"destinationZipCode","type":"string"},{"internalType":"bool","name":"waitOnReady","type":"bool"}],"internalType":"struct OrderFactory.Order[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"orders","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deliveryFee","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"enum OrderFactory.OrderStatus","name":"status","type":"uint8"},{"internalType":"address","name":"client","type":"address"},{"internalType":"address","name":"seller","type":"address"},{"internalType":"address","name":"deliveryService","type":"address"},{"internalType":"string","name":"orderContentsUrl","type":"string"},{"internalType":"string","name":"originZipCode","type":"string"},{"internalType":"string","name":"destinationZipCode","type":"string"},{"internalType":"bool","name":"waitOnReady","type":"bool"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"_seller","type":"address"},{"internalType":"string","name":"_orderInfo","type":"string"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"placeOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderId","type":"uint256"}],"name":"preparedOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderId","type":"uint256"}],"name":"rejectOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderId","type":"uint256"}],"name":"transferOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_eurTnoContract","type":"address"}],"name":"changeEurTnoAddress","outputs":[],"stateMutability":"nonpayable","type":"function"}],"QW":{"42":{"events":{},"links":{},"address":"0x83a549C97a2e415dA409BeF2F376A826387A4d64","transactionHash":"0xbbb430a4652da79a4892b345b82c8a3a8c2367f8e715f8942ca5e0fe508d3344"},"1649233289963":{"events":{},"links":{},"address":"0x86b45908bF78484e1b5e4aB73c463bE8a6C0bC8B","transactionHash":"0x86c2aa136ac5247bcb45bf1e10023752de930d1e5bbaf136725cc665ea8ff833"}}}'),H=JSON.parse('{"Mt":[{"inputs":[{"internalType":"uint256","name":"initialSupply","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"}],"QW":{"42":{"events":{"0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"}},"links":{},"address":"0x627c91523E6e502057f7e905A5110fbAE17DcD46","transactionHash":"0x214168daec2a40005c2118a6102d34c0b812e9ebbb1639934e6986f304b18a51"},"42069":{"events":{"0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"}},"links":{},"address":"0xcfa2560297086635D38f8eF4f60bA622ceaBfD2f","transactionHash":"0xe2cf728825d14c0ed917027f7809e5a5ed6cfa4adcce4ce4432ee7fb51c27f9a"},"1647797341844":{"events":{"0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"}},"links":{},"address":"0x1173c6897680fa2383c45F478f2982eE0644ae52","transactionHash":"0x9c3424c5fb3f3d328a61cd06bcc9e25cd802708706f61be951d92e870eb36d79"},"1647807026907":{"events":{"0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"}},"links":{},"address":"0x1173c6897680fa2383c45F478f2982eE0644ae52","transactionHash":"0x9c3424c5fb3f3d328a61cd06bcc9e25cd802708706f61be951d92e870eb36d79"},"1648637371675":{"events":{"0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"}},"links":{},"address":"0x17dca9DB5305357D703329e6b8a5156899cE7834","transactionHash":"0x81bcd7e23adc1276fb79da76987f80fb2a85e566c95549241d74dbbe36228654"},"1649233289963":{"events":{"0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"}},"links":{},"address":"0x1173c6897680fa2383c45F478f2982eE0644ae52","transactionHash":"0x331e328d218ca9e5f9047e50b8cafdab51ccd2c26d903af17c08377551e60597"}}}');const P=async()=>{let e=await M()();if(e){await e.request({method:"eth_requestAccounts"});const t=await e.request({method:"net_version"});e=new z.Q(e);const n=e.getSigner(),a=new B.CH(q.QW[t].address,q.Mt,n),r=new B.CH(H.QW[t].address,H.Mt,n);return{tom:a,eurTno:r}}},$=async()=>{let e=await M()();if(e){await e.request({method:"eth_requestAccounts"}),e=new z.Q(e);const t=e.getSigner();return t?await t.getAddress():null}},Z=e=>{window.ethereum&&window.ethereum.on("accountsChanged",(async t=>{await e()}))};var E={name:"NavBar",setup(){const e="/tom",t=(0,j.iH)(""),n=async()=>{t.value=await $()};(0,l.bv)(n),Z(n);const a=()=>{const e=document.querySelector(".mobile-menu");e.classList.toggle("hidden")};return{publicPath:e,address:t,toggleMobileMenu:a,publicPath:e}}},N=n(89);const R=(0,N.Z)(E,[["render",V]]);var L=R;const G={class:"p-4 bg-white shadow-lg md:flex md:items-center md:justify-between md:p-6"},Y={class:"text-sm text-gray-500 sm:text-center"},K=(0,l._)("a",{href:"https://github.com/The-Open-Market/tom",class:"hover:underline"},"TOM",-1),J=(0,l.Uk)(". MIT license. "),Q={class:"flex flex-wrap items-center mt-3 text-sm text-gray-500 sm:mt-0"},X=["href"];function ee(e,t,n,a,r,s){return(0,l.wg)(),(0,l.iD)("footer",G,[(0,l._)("span",Y,[(0,l.Uk)("© "+(0,i.zw)((new Date).getFullYear())+" ",1),K,J]),(0,l._)("ul",Q,[(0,l._)("li",null,[(0,l._)("a",{href:`${a.publicPath}/TOM_The_Open_City_Distribution_Framework_for_Supply_Chain_Management_on_Ethereum.pdf`,class:"mr-4 hover:underline md:mr-6"},"Read the paper here",8,X)])])])}var te={name:"Footer",setup(){const e="/tom";return{publicPath:e}}};const ne=(0,N.Z)(te,[["render",ee]]);var ae=ne,re=(n(8675),n(3462),n(1044)),se=n(4817),le=n(6482);const oe="keys",de=(0,j.qj)({}),ie=async()=>(Object.keys(de).length>0||await ue(),(0,j.OT)(de)),ue=async(e=!1)=>{const t=await $();let n=JSON.parse(localStorage.getItem(oe));n||(n={});let a=n[t];a||(a=ce(t)),Object.assign(de,a)},ce=e=>{const t=le.lE(e),n=new Uint8Array([...t.slice(0,32),...t.slice(0,Math.max(0,32-t.length))]),a=re.box.keyPair.fromSecretKey(n),r={private:(0,se.encodeBase64)(a.secretKey),public:(0,se.encodeBase64)(a.publicKey),symmetric:(0,se.encodeBase64)(n)};return pe(e,r),r},pe=(e,t)=>{let n=JSON.parse(localStorage.getItem(oe));n||(n={}),n[e]=t,localStorage.setItem(oe,JSON.stringify(n))},me="sellers",ye=(0,j.qj)([]),fe=()=>{const e=[];e.push({id:0,name:"Fast Blast",phone:"0612345678",email:"support@fastfood.io",description:"We sell fast food since 2013.",imageUrl:"https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/upwk61666582-wikimedia-image.jpg?w=800&dpr=1&fit=default&crop=default&q=65&vib=3&con=3&usm=15&bg=F4F4F3&ixlib=js-2.2.1&s=e51c5b6671abdc478dbb5051e0308dc6",address:{street:"Dreamweg",houseNumber:42,zipCode:"0042GG"},etherAddress:"0x59Ce492d182688239C118AcFEb1A4872Ce3B1231",keys:{private:"Wc5JLRgmiCOcEYrP6xpIcs47EjFZzkktGCaII5wRis8=",public:"3wn7e0hCji40iyiwhaB4Sr6cUmuoRvATplPMdUxK6G0=",symmetric:"Wc5JLRgmiCOcEYrP6xpIcs47EjFZzkktGCaII5wRis8="}}),e.push({id:1,name:"Hard2Nail",phone:"0687654321",email:"norefunds@hard2nail.com",description:"Nails and hammers! Order now!",imageUrl:"https://p1.pxfuel.com/preview/360/696/34/construction-tools-wooden-background-build-chrome.jpg",address:{street:"Woodenlaan",houseNumber:7,houseAddition:"A",zipCode:"9988QN"},etherAddress:"0x15f5319b330D8Da1E3a3852Fabcc60BFBA062919",keys:{private:"FfUxmzMNjaHjo4Uvq8xgv7oGKRkV9TGbMw2NoeOjhS8=",public:"dEF5pWL4CUEehUa/2QEwcud62szeUKUvUJtlY5vR8HU=",symmetric:"FfUxmzMNjaHjo4Uvq8xgv7oGKRkV9TGbMw2NoeOjhS8="}}),pe(e[0].etherAddress,e[0].keys),pe(e[1].etherAddress,e[1].keys),ge(e)},ve=e=>!(!e||!e.address)&&(e.name&&e.etherAddress&&e.address.street&&e.address.houseNumber&&e.address.zipCode),we=()=>{let e=JSON.parse(localStorage.getItem(me));return e&&ye.length===e.length?(0,j.OT)(ye):e?(ye.push(...e),(0,j.OT)(ye)):(fe(),(0,j.OT)(ye))},ge=e=>{localStorage.setItem(me,JSON.stringify(e)),e.length!==ye.length&&(ye.splice(0),ye.push(...e))},be=e=>!!ve(e)&&("undefined"!==typeof e.id?xe(e):he(e),!0),he=e=>{const t=Math.max.apply(Math,ye.map((function(e){return e.id})));e.id=t+1,e.keys=ce(e.etherAddress),ye.push(e),ge(ye)},xe=e=>{const t=ye.findIndex((t=>t.id===e.id)),n=ye[t];n.etherAddress!==e.etherAddress&&(e.keys=ce(e.etherAddress)),ye[t]=e,ge(ye)},Te=e=>{const t=ye.findIndex((t=>t.id===e));ye.splice(t,1),ge(ye)};var _e={setup(){(0,l.wF)((async()=>{we(),await ue()})),Z(ue)},components:{NavBar:L,Footer:ae}};const ke=(0,N.Z)(_e,[["render",d]]);var Ce=ke,Oe=n(678);const Se={class:"h-64"},Ae=["src"],We=(0,l.uE)('<div class="flex flex-col gap-4"><h1>Welcome to TOM: The Open Market</h1><p>TOM implements a city distribution framework for supply-chain management over an Ethereum smart contract, without any intermediate parties. We additionally provide a prototype web-application to demonstrate interacting with the smart contract.</p><p>The contract allows connecting client, seller, and delivery service and providing the following functions:</p><ul class="pl-8 list-disc"><li>Clients can select a seller and place an order</li><li>Sellers can accept orders from a client and set a delivery reward and collateral required from the delivery service</li><li>Delivery Service can accept an order and provides the collateral</li><li>Seller transfers goods to the Delivery Service and Delivery Service picks up the goods from the Seller</li><li>Delivery Service delivers the order to the Client and Client receives the order from the Delivery Service</li><li>Additionally, the Client can tip the Delivery Service</li></ul><p>Payments and collateral are using an ERC20 token (EURTno Token). The EURTno tokens are distributed to the pre-defined accounts for development, and can additionally be minted by any address for usage of the web-application, using the dashboard in the application.</p><p><b>Disclaimer:</b> Due to limitations in GitHub Pages, text rendering might not always be updated on new events, refresh the page to fix it.</p></div>',1),De=(0,l._)("iframe",{width:"100%",height:"600",src:"https://www.youtube-nocookie.com/embed/FeB3DQRu2GM",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1);function Ie(e,t,n,a,r,s){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Se,[(0,l._)("img",{src:`${a.publicPath}/Tom.png`,class:"m-auto max-h-full"},null,8,Ae)]),We,De],64)}var Ue={name:"Home",setup(){const e="/tom";return{publicPath:e}}};const Ve=(0,N.Z)(Ue,[["render",Ie]]);var je=Ve;function Fe(e,t,n,a,r,s){const o=(0,l.up)("EuroTokenFaucet"),d=(0,l.up)("Allowance"),i=(0,l.up)("SellerList");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(o),(0,l.Wm)(d),(0,l.Wm)(i)],64)}const Me=(0,l._)("h1",{class:"font-semibold text-2xl my-4"},"Seller management",-1),Be=(0,l._)("p",{class:"mb-4"},"These sellers are saved in your browser's local storage",-1),ze={class:"overflow-x-auto rounded shadow drop-shadow"},qe={class:"w-full text-sm text-left text-gray-500"},He=(0,l._)("thead",{class:"text-xs text-gray-700 uppercase bg-gray-200"},[(0,l._)("tr",null,[(0,l._)("th",{scope:"col",class:"px-6 py-3"}," Name "),(0,l._)("th",{scope:"col",class:"px-6 py-3 hidden lg:table-cell"}," Phone "),(0,l._)("th",{scope:"col",class:"px-6 py-3 hidden lg:table-cell"}," Email "),(0,l._)("th",{scope:"col",class:"px-6 py-3 hidden md:table-cell"}," Address "),(0,l._)("th",{scope:"col",class:"px-6 py-3"})])],-1),Pe={class:"bg-white"},$e={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},Ze={class:"px-6 py-4 hidden lg:table-cell"},Ee={class:"px-6 py-4 hidden lg:table-cell"},Ne={class:"px-6 py-4 hidden md:table-cell"},Re={class:"px-6 py-4 flex gap-2"},Le={class:"bg-white border-b"},Ge={class:"px-6 overflow-hidden",colspan:"100%"},Ye={class:"bg-white"},Ke={class:"px-6 py-4",colspan:"100%"},Je={class:"bg-white border-b"},Qe={class:"px-6 overflow-hidden",colspan:"100%"};function Xe(e,t,n,r,s,o){const d=(0,l.up)("Button"),u=(0,l.up)("SellerForm");return(0,l.wg)(),(0,l.iD)(l.HY,null,[Me,Be,(0,l._)("div",ze,[(0,l._)("table",qe,[He,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.sellers,(e=>((0,l.wg)(),(0,l.iD)(l.HY,{key:e.id},[(0,l._)("tr",Pe,[(0,l._)("th",$e,(0,i.zw)(e.name),1),(0,l._)("td",Ze,(0,i.zw)(e.phone),1),(0,l._)("td",Ee,(0,i.zw)(e.email),1),(0,l._)("td",Ne,(0,i.zw)(r.addressToString(e.address)),1),(0,l._)("td",Re,[(0,l.Wm)(d,{text:"Edit",class:"blue ml-auto",onClick:t=>r.setEditId(e.id)},null,8,["onClick"])])]),(0,l._)("tr",Le,[(0,l._)("td",Ge,[(0,l.Wm)(a.uT,{name:"seller-form"},{default:(0,l.w5)((()=>[r.editId===e.id?((0,l.wg)(),(0,l.j4)(u,{key:0,class:"pb-4",model:e,onSellerSaved:t=>r.setEditId(e.id)},null,8,["model","onSellerSaved"])):(0,l.kq)("",!0)])),_:2},1024)])])],64)))),128)),(0,l._)("tr",Ye,[(0,l._)("td",Ke,[(0,l.Wm)(d,{text:"Add",class:"green ml-auto",onClick:t[0]||(t[0]=e=>r.toggleCreate())})])]),(0,l._)("tr",Je,[(0,l._)("td",Qe,[(0,l.Wm)(a.uT,{name:"seller-form"},{default:(0,l.w5)((()=>[r.create?((0,l.wg)(),(0,l.j4)(u,{key:0,class:"pb-4",onSellerSaved:t[1]||(t[1]=e=>r.toggleCreate())})):(0,l.kq)("",!0)])),_:1})])])])])])],64)}const et=["disabled"],tt={key:1};function nt(e,t,n,a,r,s){const o=(0,l.up)("Loader");return(0,l.wg)(),(0,l.iD)("button",{onClick:t[0]||(t[0]=(...e)=>a.clicked&&a.clicked(...e)),class:"green",disabled:n.disabled||n.loading},[n.loading?((0,l.wg)(),(0,l.j4)(o,{key:0})):((0,l.wg)(),(0,l.iD)("span",tt,(0,i.zw)(n.text),1))],8,et)}const at={class:"animate-spin my-auto h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rt=(0,l._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"white","stroke-width":"4"},null,-1),st=(0,l._)("path",{class:"opacity-75 text-yellow-600",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),lt=[rt,st];function ot(e,t,n,a,r,s){return(0,l.wg)(),(0,l.iD)("svg",at,lt)}var dt={name:"Loader"};const it=(0,N.Z)(dt,[["render",ot]]);var ut=it,ct={name:"Button",props:{text:{type:String,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["click"],setup(e,t){const n=()=>{t.emit("click")};return{clicked:n}},components:{Loader:ut}};const pt=(0,N.Z)(ct,[["render",nt],["__scopeId","data-v-0dbbe044"]]);var mt=pt;const yt={class:"flex flex-wrap gap-4"},ft={class:"flex flex-col grow gap-4 min-w-4/5"},vt={class:"flex lg:flex-col grow lg:grow-0 justify-between"};function wt(e,t,n,a,r,s){const o=(0,l.up)("Input"),d=(0,l.up)("AddressForm"),i=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)("div",yt,[(0,l._)("div",ft,[(0,l.Wm)(o,{modelValue:a.seller.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.seller.name=e),required:"",type:"text",title:"Name",placeholder:"The seller's name"},null,8,["modelValue"]),(0,l.Wm)(o,{modelValue:a.seller.etherAddress,"onUpdate:modelValue":t[1]||(t[1]=e=>a.seller.etherAddress=e),required:"",type:"text",title:"Ethereum address",placeholder:"The seller's wallet address"},null,8,["modelValue"]),(0,l.Wm)(o,{modelValue:a.seller.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>a.seller.phone=e),type:"text",title:"Phone",placeholder:"Contact phone number"},null,8,["modelValue"]),(0,l.Wm)(o,{modelValue:a.seller.email,"onUpdate:modelValue":t[3]||(t[3]=e=>a.seller.email=e),type:"text",title:"Email",placeholder:"Contact email address"},null,8,["modelValue"]),(0,l.Wm)(o,{modelValue:a.seller.description,"onUpdate:modelValue":t[4]||(t[4]=e=>a.seller.description=e),type:"textarea",title:"Description",placeholder:"Describe the seller"},null,8,["modelValue"]),(0,l.Wm)(o,{modelValue:a.seller.imageUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>a.seller.imageUrl=e),type:"text",title:"Image URL",placeholder:"Image"},null,8,["modelValue"]),(0,l.Wm)(d,{modelValue:a.seller.address,"onUpdate:modelValue":t[6]||(t[6]=e=>a.seller.address=e)},null,8,["modelValue"])]),(0,l._)("div",vt,[(0,l.Wm)(i,{text:"Save",class:"order-last lg:order-first green",onClick:a.save},null,8,["onClick"]),"undefined"!==typeof a.seller.id?((0,l.wg)(),(0,l.j4)(i,{key:0,text:"Delete",class:"red",onClick:a.remove},null,8,["onClick"])):(0,l.kq)("",!0)])])}const gt={class:"flex flex-col focus-within:text-sky-700"},bt={class:"text-xs font-medium"},ht={key:0,class:"text-red-500"},xt=["value","placeholder"],Tt=["type","checked"],_t=["type","value","step","placeholder"];function kt(e,t,n,a,r,s){return(0,l.wg)(),(0,l.iD)("div",gt,[(0,l._)("label",bt,[(0,l.Uk)((0,i.zw)(n.title),1),n.required?((0,l.wg)(),(0,l.iD)("span",ht,"*")):(0,l.kq)("",!0)]),"textarea"===n.type?((0,l.wg)(),(0,l.iD)("textarea",{key:0,value:n.modelValue,onInput:t[0]||(t[0]=(...e)=>a.onInput&&a.onInput(...e)),placeholder:n.placeholder,class:(0,i.C_)(`text-sm pl-1 border border-gray-400 focus:border-sky-700 outline-none rounded ${n.inputClass}`),rows:"5"},null,42,xt)):"checkbox"===n.type?((0,l.wg)(),(0,l.iD)("input",{key:1,type:n.type,checked:n.modelValue,onChange:t[1]||(t[1]=(...e)=>a.onChecked&&a.onChecked(...e)),class:(0,i.C_)(`h-7 text-sm pl-1 border border-gray-400 focus:border-sky-700 outline-none rounded ${n.inputClass}`)},null,42,Tt)):((0,l.wg)(),(0,l.iD)("input",{key:2,type:n.type,value:n.modelValue,step:n.step,onInput:t[2]||(t[2]=(...e)=>a.onInput&&a.onInput(...e)),placeholder:n.placeholder,class:(0,i.C_)(`h-7 text-sm pl-1 border border-gray-400 focus:border-sky-700 outline-none rounded ${n.inputClass}`)},null,42,_t))])}var Ct={name:"Input",emits:["update:modelValue"],props:{modelValue:{required:!0},type:{type:String,required:!0},title:{type:String,required:!0},placeholder:{type:String},step:{type:Number,default:.01},required:{type:Boolean,default:!1},inputClass:{type:String}},setup(e,t){const n=e=>{t.emit("update:modelValue",e.currentTarget.value)},a=e=>{t.emit("update:modelValue",e.currentTarget.checked)};return{onInput:n,onChecked:a}}};const Ot=(0,N.Z)(Ct,[["render",kt]]);var St=Ot;const At={class:"flex flex-wrap items-end gap-4"},Wt={class:"flex flex-wrap grow items-end gap-4"};function Dt(e,t,n,a,r,s){const o=(0,l.up)("Input");return(0,l.wg)(),(0,l.iD)("div",At,[(0,l.Wm)(o,{class:"grow",type:"text",modelValue:n.modelValue.street,"onUpdate:modelValue":t[0]||(t[0]=e=>n.modelValue.street=e),required:"",title:"Street",placeholder:"Enter the street name"},null,8,["modelValue"]),(0,l._)("div",Wt,[(0,l.Wm)(o,{class:"min-w-16 grow",inputClass:"appearance-none",type:"number",modelValue:n.modelValue.houseNumber,"onUpdate:modelValue":t[1]||(t[1]=e=>n.modelValue.houseNumber=e),required:"",title:"House number",placeholder:"Enter the house number"},null,8,["modelValue"]),(0,l.Wm)(o,{class:"min-w-16 grow",type:"text",modelValue:n.modelValue.houseAddition,"onUpdate:modelValue":t[2]||(t[2]=e=>n.modelValue.houseAddition=e),title:"House addition",placeholder:"Enter the house addition"},null,8,["modelValue"]),(0,l.Wm)(o,{class:"grow",type:"text",modelValue:n.modelValue.zipCode,"onUpdate:modelValue":t[3]||(t[3]=e=>n.modelValue.zipCode=e),required:"",title:"Zip code",placeholder:"Enter the zip code"},null,8,["modelValue"])])])}var It={name:"AddressForm",props:{modelValue:{type:Object,required:!0}},components:{Input:St}};const Ut=(0,N.Z)(It,[["render",Dt]]);var Vt=Ut,jt={name:"SellerForm",emits:["sellerSaved"],props:{model:{type:Object,default:void 0}},setup(e,t){const n=(0,j.qj)({id:e.model?e.model.id:void 0,name:e.model?e.model.name:void 0,etherAddress:e.model?e.model.etherAddress:void 0,phone:e.model?e.model.phone:void 0,email:e.model?e.model.email:void 0,description:e.model?e.model.description:void 0,imageUrl:e.model?e.model.imageUrl:void 0,address:{street:e.model?e.model.address.street:void 0,houseNumber:e.model?e.model.address.houseNumber:void 0,houseAddtion:e.model?e.model.address.houseAddition:void 0,zipCode:e.model?e.model.address.zipCode:void 0}}),a=()=>{be(n)&&t.emit("sellerSaved")},r=()=>{Te(n.id)};return{seller:n,save:a,remove:r}},components:{Input:St,Button:mt,AddressForm:Vt}};const Ft=(0,N.Z)(jt,[["render",wt]]);var Mt=Ft;const Bt=e=>`${e.street} ${e.houseNumber} ${e.houseAddition?e.houseAddition:""}, ${e.zipCode}`;var zt={name:"SellerList",setup(){const e=we(),t=(0,j.iH)(),n=e=>{t.value===e?t.value=null:(a.value=!1,t.value=e)},a=(0,j.iH)(!1),r=()=>{n(t.value),a.value=!a.value};return{sellers:e,editId:t,setEditId:n,create:a,toggleCreate:r,addressToString:Bt}},components:{Button:mt,SellerForm:Mt}};const qt=(0,N.Z)(zt,[["render",Xe]]);var Ht=qt;const Pt=(0,l._)("h1",{class:"font-semibold text-2xl my-4"},"Allowance management",-1),$t=(0,l._)("p",{class:"mb-4"},"Manage your EURT tokens allowance to the contract",-1),Zt={class:"flex flex-col justify-between gap-4"},Et={class:"flex items-end gap-4"},Nt=(0,l._)("span",{class:"text-sm"},"Current allowance:",-1),Rt={key:0},Lt=(0,l._)("span",{class:"italic font-semibold text-xs"},"EURT",-1),Gt={class:"flex items-end gap-4"},Yt=(0,l._)("span",{class:"text-sm"},"Set new allowance:",-1);function Kt(e,t,n,a,r,s){const o=(0,l.up)("Loader"),d=(0,l.up)("MoneyInput"),u=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)(l.HY,null,[Pt,$t,(0,l._)("div",Zt,[(0,l._)("div",Et,[Nt,a.currentAllowance>=0?((0,l.wg)(),(0,l.iD)("span",Rt,[(0,l.Uk)((0,i.zw)(a.currentAllowance)+" ",1),Lt])):((0,l.wg)(),(0,l.j4)(o,{key:1}))]),(0,l._)("div",Gt,[Yt,(0,l.Wm)(d,{class:"small",title:"Allowance",type:"number",modelValue:a.newAllowance,"onUpdate:modelValue":t[0]||(t[0]=e=>a.newAllowance=e)},null,8,["modelValue"]),(0,l.Wm)(u,{class:"small blue",text:"Set",onClick:t[1]||(t[1]=e=>a.setAllowance())})])])],64)}const Jt={class:"flex flex-col focus-within:text-sky-700"},Qt={class:"text-xs font-medium"};function Xt(e,t,n,r,s,o){return(0,l.wg)(),(0,l.iD)("div",Jt,[(0,l._)("span",Qt,(0,i.zw)(n.title),1),(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.valueDisplay=e),onBlur:t[1]||(t[1]=e=>r.focus(!1)),onFocus:t[2]||(t[2]=e=>r.focus(!0)),class:"h-7 text-sm pl-1 border border-gray-400 focus:border-sky-700 outline-none rounded"},null,544),[[a.nr,r.valueDisplay]])])}var en={name:"MoneyInput",emits:["update:modelValue"],props:{modelValue:{required:!0},title:{type:String,required:!0}},setup(e,t){const n=(0,j.iH)(!1);function a(e){n.value=e}const r=(0,l.Fl)({get:function(){return n.value?e.modelValue.toString():"€ "+e.modelValue.toFixed(2)},set:function(e){let n=parseFloat(e.replace(/[^\d\.]/g,""));n=Math.round(n*Math.pow(10,2))/Math.pow(10,2),isNaN(n)&&(n=0),t.emit("update:modelValue",n)}});return{valueDisplay:r,focus:a}}};const tn=(0,N.Z)(en,[["render",Xt]]);var nn=tn,an=n(7647);const rn=async e=>{try{const{eurTno:t,tom:n}=await P(),a=an.fi(e.toString()),r=await t.approve(n.address,a);return await r.wait(),!0}catch(t){return console.log(t),!1}},sn=async e=>{try{const{eurTno:t,tom:n}=await P(),a=await t.allowance(e,n.address);return parseFloat(an.dF(a))}catch(t){return console.log(t),0}},ln=async(e,t)=>{try{const{eurTno:n}=await P(),a=an.fi(t.toString()),r=await n.mint(e,a);return await r.wait(),!0}catch(n){return console.log(n),!1}},on=async e=>{try{const{eurTno:t}=await P(),n=await t.balanceOf(e);return parseFloat(an.dF(n))}catch(t){return console.log(t),0}};var dn={name:"Allowance",setup(){const e=(0,l.f3)("$toast"),t=(0,j.iH)(),n=(0,j.iH)(0),a=async()=>{const e=await $();t.value=await sn(e),n.value=t.value},r=async()=>{await rn(n.value)||e.error("Error approving euro transaction")},s=async()=>{const e=await $(),{eurTno:t}=await P(),n=t.filters.Approval(e.value,null,null);t.on(n,a),await a()};return(0,l.bv)(s),Z(s),{currentAllowance:t,newAllowance:n,setAllowance:r}},components:{MoneyInput:nn,Button:mt,Loader:ut}};const un=(0,N.Z)(dn,[["render",Kt]]);var cn=un;const pn=(0,l._)("h1",{class:"font-semibold text-2xl my-4"},"Euro token faucet",-1),mn=(0,l._)("p",{class:"mb-4"},"Get EURT tokens here",-1),yn={class:"flex flex-col justify-between gap-4"},fn={class:"flex items-end gap-4"},vn=(0,l._)("span",{class:"text-sm"},"Amount:",-1);function wn(e,t,n,a,r,s){const o=(0,l.up)("MoneyInput"),d=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)(l.HY,null,[pn,mn,(0,l._)("div",yn,[(0,l._)("div",fn,[vn,(0,l.Wm)(o,{class:"small",title:"EURT",type:"number",modelValue:a.amount,"onUpdate:modelValue":t[0]||(t[0]=e=>a.amount=e)},null,8,["modelValue"]),(0,l.Wm)(d,{class:"small blue",text:"Get",onClick:t[1]||(t[1]=e=>a.mintToken())})])])],64)}var gn={name:"EuroTokenFaucet",setup(){const e=(0,l.f3)("$toast"),t=(0,j.iH)(10),n=async()=>{const n=await $();await ln(n,t.value)||e.error("Error approving euro transaction")};return{amount:t,mintToken:n}},components:{MoneyInput:nn,Button:mt}};const bn=(0,N.Z)(gn,[["render",wn]]);var hn=bn,xn={name:"Dashboard",components:{Allowance:cn,SellerList:Ht,EuroTokenFaucet:hn}};const Tn=(0,N.Z)(xn,[["render",Fe]]);var _n=Tn;function kn(e,t,n,a,r,s){const o=(0,l.up)("MyOrders"),d=(0,l.up)("StyledTab"),i=(0,l.up)("NewOrder"),u=(0,l.up)("StyledTabs");return(0,l.wg)(),(0,l.j4)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"My orders"},{default:(0,l.w5)((()=>[(0,l.Wm)(o)])),_:1}),(0,l.Wm)(d,{name:"New order"},{default:(0,l.w5)((()=>[(0,l.Wm)(i)])),_:1})])),_:1})}function Cn(e,t,n,a,r,s){const o=(0,l.up)("Tabs");return(0,l.wg)(),(0,l.j4)(o,{"wrapper-class":"","panels-wrapper-class":"","nav-class":"flex justify-center gap-8 py-4 border-y mb-4","nav-item-class":"text-gray-700 font-semibold hover:text-yellow-600 transition duration-100","nav-item-active-class":"text-yellow-600","nav-item-disabled-class":"","nav-item-link-class":"","nav-item-link-active-class":"","nav-item-link-disabled-class":"",options:{useUrlFragment:!1}},{default:(0,l.w5)((()=>[(0,l.WI)(e.$slots,"default")])),_:3})}var On=n(3559),Sn={name:"StyledTabs",components:{Tabs:On.mQ}};const An=(0,N.Z)(Sn,[["render",Cn]]);var Wn=An;function Dn(e,t,n,a,r,s){const o=(0,l.up)("Tab");return(0,l.wg)(),(0,l.j4)(o,{name:n.name},{default:(0,l.w5)((()=>[(0,l.WI)(e.$slots,"default")])),_:3},8,["name"])}var In={name:"StyledTab",props:{name:{type:String,required:!0}},components:{Tab:On.OK}};const Un=(0,N.Z)(In,[["render",Dn]]);var Vn=Un;const jn={key:0},Fn=(0,l._)("p",{class:"italic text-lg text-gray-700 font-semibold"},"No orders yet. Make a new order now!",-1),Mn=[Fn];function Bn(e,t,n,a,r,s){const o=(0,l.up)("OrderInfo"),d=(0,l.up)("Button"),i=(0,l.up)("MoneyInput"),u=(0,l.up)("OrderCard"),c=(0,l.up)("Grid");return 0===a.orders.length?((0,l.wg)(),(0,l.iD)("div",jn,Mn)):((0,l.wg)(),(0,l.j4)(c,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.orders,(e=>((0,l.wg)(),(0,l.j4)(u,{key:e.id,order:e,loading:e.loading},(0,l.Nv)({contents:(0,l.w5)((()=>[(0,l.Wm)(o,{order:e,pov:"client"},null,8,["order"])])),_:2},[e.status.value===a.OrderStatus.Pending.value?{name:"controls",fn:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Cancel",class:"red",onClick:t=>a.cancel(e.id),disabled:e.loading},null,8,["onClick","disabled"])]))}:void 0,e.status.value===a.OrderStatus.InTransit.value||e.status.value===a.OrderStatus.Delivered.value?{name:"controls",fn:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Receive",class:"blue",onClick:t=>a.receive(e.id),disabled:e.loading},null,8,["onClick","disabled"])]))}:void 0,e.status.value===a.OrderStatus.Completed.value?{name:"controls",fn:(0,l.w5)((()=>[(0,l.Wm)(i,{id:"tip",title:"Tip",class:"small",modelValue:e.tip,"onUpdate:modelValue":t=>e.tip=t},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(d,{text:"Tip",class:"blue",onClick:t=>a.tip(e.id),disabled:e.loading},null,8,["onClick","disabled"])]))}:void 0]),1032,["order","loading"])))),128))])),_:1}))}const zn=e=>((0,l.dD)("data-v-589ab911"),e=e(),(0,l.Cn)(),e),qn={class:"flex justify-between py-3"},Hn={class:"font-medium"},Pn=(0,l.Uk)(" Order "),$n=zn((()=>(0,l._)("span",{class:"text-sm"},"#",-1))),Zn={class:"py-3"},En={class:"flex flex-wrap justify-end gap-4 pt-3 mt-auto"},Nn=zn((()=>(0,l._)("p",{class:"text-sm italic font-thin text-slate-700"},"No controls are available",-1))),Rn={key:0,class:"flex absolute w-full h-full rounded top-0 left-0 z-10 bg-black/50"};function Ln(e,t,n,a,r,s){const o=(0,l.up)("Loader"),d=(0,l.up)("Card");return(0,l.wg)(),(0,l.j4)(d,null,{default:(0,l.w5)((()=>[(0,l._)("div",qn,[(0,l._)("h3",Hn,[Pn,$n,(0,l.Uk)((0,i.zw)(n.order.id),1)]),(0,l._)("div",{class:(0,i.C_)("px-2 my-auto text-xs font-semibold rounded-full "+n.order.status.color)},(0,i.zw)(n.order.status.name),3)]),(0,l._)("div",Zn,[(0,l.WI)(e.$slots,"contents",{},void 0,!0)]),(0,l._)("div",En,[(0,l.WI)(e.$slots,"controls",{},(()=>[Nn]),!0)]),n.loading?((0,l.wg)(),(0,l.iD)("div",Rn,[(0,l.Wm)(o,{class:"m-auto"})])):(0,l.kq)("",!0)])),_:3})}const Gn={class:"relative bg-gray-100 rounded shadow drop-shadow px-6 py-4 flex flex-col"};function Yn(e,t,n,a,r,s){return(0,l.wg)(),(0,l.iD)("div",Gn,[(0,l.WI)(e.$slots,"default")])}var Kn={name:"Card"};const Jn=(0,N.Z)(Kn,[["render",Yn]]);var Qn=Jn,Xn=n(5760);const ea=(0,Xn.Ue)("https://ipfs.infura.io:5001/api/v0"),ta=async e=>{const{path:t}=await ea.add(e);return t},na=async e=>{const t=await fetch(`https://ipfs.infura.io/ipfs/${e}`),n=await t.text();return JSON.parse(n)};n(1703);var aa=n(5361);const ra=()=>(0,re.randomBytes)(re.box.nonceLength),sa=(e,t,n)=>{const a=ra(),r=(0,se.decodeUTF8)(JSON.stringify(t)),s=n?(0,re.box)(r,a,n,e):re.box.after(r,a,e),l=new Uint8Array(a.length+s.length);l.set(a),l.set(s,a.length);const o=(0,se.encodeBase64)(l);return o},la=(e,t,n)=>{const a=(0,se.decodeBase64)(t),r=a.slice(0,re.box.nonceLength),s=a.slice(re.box.nonceLength,t.length),l=n?re.box.open(s,r,n,e):re.box.open.after(s,r,e);if(!l)throw new Error("Could not decrypt message");const o=(0,se.encodeUTF8)(l);return JSON.parse(o)},oa=(e,t)=>{const n=(0,se.decodeBase64)(e),a=ra(),r=(0,se.decodeUTF8)(JSON.stringify(t)),s=(0,re.secretbox)(r,a,n),l=new Uint8Array(a.length+s.length);l.set(a),l.set(s,a.length);const o=(0,se.encodeBase64)(l);return o},da=(e,t)=>{const n=(0,se.decodeBase64)(e),a=(0,se.decodeBase64)(t),r=a.slice(0,re.secretbox.nonceLength),s=a.slice(re.secretbox.nonceLength,t.length),l=re.secretbox.open(s,r,n);if(!l)throw new Error("Could not decrypt message");const o=(0,se.encodeUTF8)(l);return JSON.parse(o)},ia=async(e,t,n,a,r)=>{const s=r["deliveryAddress"],l=`${s.street} ${s.hnr} ${s.hnr_add||""}, ${s.zip}`,o=Uint8Array.from((0,re.randomBytes)(10)),d=Uint8Array.from((0,se.decodeUTF8)(l)+o),i=aa.lW.from((0,re.hash)(d)).toString("hex");r["salt"]=(0,se.encodeBase64)(o);const u=re.box.before((0,se.decodeBase64)(e),(0,se.decodeBase64)(n)),c=sa(u,r),p=oa(a,r);return JSON.stringify({sellerPublicKey:e,clientPublicKey:t,orderInformation:c,clientOrderInformation:p,hashedAddress:i})},ua=async({clientPublicKey:e,orderInformation:t},n)=>{const a=re.box.before((0,se.decodeBase64)(e),(0,se.decodeBase64)(n)),r=la(a,t);return r},ca=async({clientOrderInformation:e},t)=>da(t,e),pa=async(e,t,n)=>{try{const a=(0,se.decodeBase64)(t),r=n.split("$")[0],s=Uint8Array.from((0,se.decodeUTF8)(e)+a);return aa.lW.from((0,re.hash)(s)).toString("hex")==r}catch(a){return!1}},ma={defaultDeliveryFee:2.5,defaultCollateralPercentage:.5},ya=1e6,fa=Object.freeze({Pending:{value:0,name:"Pending",color:"yellow"},Approved:{value:1,name:"Approved",color:"light-green"},Accepted:{value:2,name:"Accepted",color:"orange"},Ready:{value:3,name:"Ready",color:"green"},PickedUp:{value:4,name:"Picked up",color:"green"},Transferred:{value:5,name:"Transferred",color:"green"},InTransit:{value:6,name:"In transit",color:"green"},Received:{value:7,name:"Received",color:"green"},Delivered:{value:8,name:"Delivered",color:"green"},Completed:{value:9,name:"Completed",color:"blue"},Cancelled:{value:10,name:"Cancelled",color:"red"},Rejected:{value:11,name:"Rejected",color:"red"}}),va={0:fa.Pending,1:fa.Approved,2:fa.Accepted,3:fa.Ready,4:fa.PickedUp,5:fa.Transferred,6:fa.InTransit,7:fa.Received,8:fa.Delivered,9:fa.Completed,10:fa.Cancelled,11:fa.Rejected},wa=async(e,t=null,n=null)=>{const a=[];for(const r in e){const s=await ga(e[r],t,n);s&&a.push(s)}return a},ga=async(e,t=null,n=null)=>{try{const a={id:parseInt(e.id._hex,16),amount:parseFloat(an.dF(e.amount)),deliveryFee:parseFloat(an.dF(e.deliveryFee)),collateral:parseFloat(an.dF(e.collateral)),status:va[e.status],client:e.client,seller:e.seller,deliveryService:e.deliveryService,orderContentsUrl:e.orderContentsUrl,originZipCode:e.originZipCode,destinationZipCode:e.destinationZipCode,waitOnReady:e.waitOnReady,loading:!1};return a.status.value===fa.Pending.value&&(a.collateral=a.amount*ma.defaultCollateralPercentage,a.deliveryFee=ma.defaultDeliveryFee),a.status.value===fa.Completed.value&&(a.tip=0),await ha(a,t,n),await ba(a),a}catch(a){return null}},ba=async e=>{const{tom:t}=await P(),n=await t.getClientOrderCount(e.client);e.completedOrders=parseInt(n[0]._hex,16),e.cancelledOrders=parseInt(n[1]._hex,16)},ha=async(e,t,n)=>{if(!t)return;const a=await na(e.orderContentsUrl);switch(t){case"client":if(!n)return void console.log("Key is required to decrypt client order info");const t=await ca(a,n);e.orderInformation=t;break;case"seller":if(!n)return void console.log("Key is required to decrypt seller order info");const r=await ua(a,n);e.orderInformation=r;break;case"delivery":e.hashedAddress=a.hashedAddress;break;default:console.log("Wrong party provided for the IPFS data download & decryption");break}};var xa={name:"OrderCard",props:{order:{type:Object,required:!0},loading:{type:Boolean,default:!1}},components:{Card:Qn,Loader:ut}};const Ta=(0,N.Z)(xa,[["render",Ln],["__scopeId","data-v-589ab911"]]);var _a=Ta;const ka={class:"grid gap-4 grid-cols-1 md:grid-cols-3 lg:grid-cols-4"};function Ca(e,t,n,a,r,s){return(0,l.wg)(),(0,l.iD)("div",ka,[(0,l.WI)(e.$slots,"default")])}var Oa={name:"Grid"};const Sa=(0,N.Z)(Oa,[["render",Ca]]);var Aa=Sa;const Wa={key:0},Da=(0,l._)("span",{class:"font-medium"},"Address: ",-1),Ia={class:"font-medium"},Ua=(0,l.Uk)(" Order details "),Va={class:"text-sm lowercase"},ja=(0,l.Uk)(": "),Fa={key:1},Ma=(0,l._)("span",{class:"font-medium"},"Address: ",-1),Ba={class:"flex"},za=(0,l._)("span",{class:"font-medium"},"Salt: ",-1),qa={key:0},Ha=(0,l._)("span",{class:"font-medium"},"Order history:",-1),Pa=(0,l.Uk)("# Completed orders: "),$a={class:"font-medium"},Za=(0,l.Uk)("# Cancelled orders: "),Ea={class:"font-medium"},Na={key:1},Ra=(0,l._)("span",{class:"font-medium"},"Collateral: ",-1),La={key:2},Ga=(0,l._)("span",{class:"font-medium"},"Delivery Fee: ",-1),Ya={class:"font-medium"},Ka=(0,l.Uk)(" Order details "),Ja={class:"text-sm lowercase"},Qa=(0,l.Uk)(": "),Xa={key:2},er={class:"border-b pb-3 mb-3"},tr=(0,l._)("span",{class:"font-medium"},"Origin: ",-1),nr=(0,l._)("span",{class:"font-medium"},"Destination: ",-1),ar={class:"flex"},rr=(0,l._)("span",{class:"font-medium"},"Address hash: ",-1),sr={class:"text-red-500"},lr=(0,l._)("span",{class:"font-medium"},"Collateral: ",-1),or={class:"text-red-500"},dr=(0,l._)("span",{class:"font-medium"},"Delivery Fee: ",-1),ir={key:0,class:"text-orange-500"},ur=(0,l._)("span",{class:"text-sm font-semibold"},[(0,l.Uk)(" Order is not ready on acceptance "),(0,l._)("span",{class:"text-lg text-red-500"},"!")],-1),cr=[ur];function pr(e,t,n,a,r,s){const o=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)(l.HY,null,["client"===n.pov?((0,l.wg)(),(0,l.iD)("div",Wa,[(0,l._)("div",null,[Da,(0,l.Uk)(" "+(0,i.zw)(a.deliveryAddress.street)+" "+(0,i.zw)(a.deliveryAddress.hnr)+" "+(0,i.zw)(a.deliveryAddress.hnr_add)+", "+(0,i.zw)(a.deliveryAddress.zip),1)]),(0,l._)("div",null,[(0,l._)("span",Ia,[Ua,(0,l._)("span",Va,"("+(0,i.zw)(a.items)+" item"+(0,i.zw)(a.items>1?"s":"")+")",1),ja]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.cart,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l._)("p",null,(0,i.zw)(e.quantity)+"x "+(0,i.zw)(e.name)+": €"+(0,i.zw)(parseFloat(e.price*e.quantity).toFixed(2)),1)])))),128))])])):(0,l.kq)("",!0),"seller"===n.pov?((0,l.wg)(),(0,l.iD)("div",Fa,[(0,l._)("div",null,[Ma,(0,l.Uk)(" "+(0,i.zw)(a.deliveryAddress.street)+" "+(0,i.zw)(a.deliveryAddress.hnr)+" "+(0,i.zw)(a.deliveryAddress.hnr_add)+", "+(0,i.zw)(a.deliveryAddress.zip),1)]),(0,l._)("div",Ba,[za,(0,l.Wm)(o,{text:"Copy",onClick:t[0]||(t[0]=e=>a.copyValue(a.salt)),class:"ml-1 green transparent small"})]),n.order.status.value===a.OrderStatus.Pending.value?((0,l.wg)(),(0,l.iD)("div",qa,[Ha,(0,l._)("div",null,[Pa,(0,l._)("span",$a,(0,i.zw)(n.order["completedOrders"]),1)]),(0,l._)("div",null,[Za,(0,l._)("span",Ea,(0,i.zw)(n.order["cancelledOrders"]),1)])])):(0,l.kq)("",!0),n.order.status.value!==a.OrderStatus.Pending.value?((0,l.wg)(),(0,l.iD)("div",Na,[Ra,(0,l.Uk)(" "+(0,i.zw)(0<n.order.collateral?`€${n.order.collateral}`:"N/a"),1)])):(0,l.kq)("",!0),n.order.status.value!==a.OrderStatus.Pending.value?((0,l.wg)(),(0,l.iD)("div",La,[Ga,(0,l.Uk)(" "+(0,i.zw)(0<n.order.deliveryFee?`€${n.order.deliveryFee.toFixed(2)}`:"N/a"),1)])):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l._)("span",Ya,[Ka,(0,l._)("span",Ja,"("+(0,i.zw)(a.items)+" item"+(0,i.zw)(a.items>1?"s":"")+")",1),Qa]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.cart,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l._)("p",null,(0,i.zw)(e.quantity)+"x "+(0,i.zw)(e.name)+": €"+(0,i.zw)(parseFloat(e.price*e.quantity).toFixed(2)),1)])))),128))])])):(0,l.kq)("",!0),"delivery"===n.pov?((0,l.wg)(),(0,l.iD)("div",Xa,[(0,l._)("div",er,[(0,l._)("div",null,[tr,(0,l.Uk)(" "+(0,i.zw)(n.order.originZipCode),1)]),(0,l._)("div",null,[nr,(0,l.Uk)(" "+(0,i.zw)(n.order.destinationZipCode),1)])]),(0,l._)("div",ar,[rr,(0,l.Wm)(o,{text:"Copy",onClick:t[1]||(t[1]=e=>a.copyValue(a.hashedAddress)),class:"ml-1 green transparent small"})]),(0,l._)("div",sr,[lr,(0,l.Uk)(" "+(0,i.zw)(0<n.order.collateral?`€${n.order.collateral.toFixed(2)}`:"N/a"),1)]),(0,l._)("div",or,[dr,(0,l.Uk)(" "+(0,i.zw)(0<n.order.deliveryFee?`€${n.order.deliveryFee.toFixed(2)}`:"N/a"),1)]),n.order.waitOnReady&&n.order.status.value<a.OrderStatus.Ready.value?((0,l.wg)(),(0,l.iD)("div",ir,cr)):(0,l.kq)("",!0)])):(0,l.kq)("",!0)],64)}var mr=n(7071),yr={name:"OrderInfo",props:{order:{type:Object,required:!0},pov:{type:String,default:"seller"}},setup(e){const{toClipboard:t}=(0,mr.Z)();var n,a,r,s;if(e.order.orderInformation){var{deliveryAddress:n,cart:a,salt:r}=e.order.orderInformation;s=a.reduce(((e,t)=>e+t.quantity),0)}const l=e.order.hashedAddress,o=async e=>{try{await t(e)}catch(n){console.error(n)}};return{deliveryAddress:n,salt:r,cart:a,items:s,hashedAddress:l,copyValue:o,OrderStatus:fa}},components:{Button:mt}};const fr=(0,N.Z)(yr,[["render",pr]]);var vr=fr;const wr=async(e,t=null)=>{const{tom:n}=await P(),a=await n.getOrdersByClient(e);return wa(a,"client",t)},gr=async(e,t,n)=>{try{const{tom:a}=await P(),r=an.fi(n.toString()),s=await a.placeOrder(e,t,r,{gasLimit:ya});return await s.wait(),!0}catch(a){return console.log(a),!1}},br=async e=>{try{const{tom:t}=await P(),n=await t.cancelOrder(e,{gasLimit:ya});return await n.wait(),!0}catch(t){return console.log(t),!1}},hr=async e=>{try{const{tom:t}=await P(),n=await t.completeOrder(e,{gasLimit:ya});return await n.wait(),!0}catch(t){return console.log(t),!1}},xr=async(e,t)=>{try{const{eurTno:n}=await P(),a=an.fi(t.toString()),r=await n.transfer(e,a);return await r.wait(),!0}catch(n){return console.log(n),!1}};var Tr={name:"MyOrders",setup(){const e=(0,j.qj)([]),t=(0,j.iH)(""),n=(0,l.f3)("$toast"),a=async t=>{const a=e.findIndex((e=>e.id===t));e[a].loading=!0;try{await br(t)||n.error(`Error cancelling order #${t}`)}finally{e[a].loading=!1}},r=async t=>{const a=e.findIndex((e=>e.id===t));e[a].loading=!0;try{await hr(t)||n.error(`Error receiving order #${t}`)}finally{e[a].loading=!1}},s=async t=>{const a=e.findIndex((e=>e.id===t));e[a].loading=!0;try{await xr(e[a].deliveryService,e[a].tip)||n.error(`Error tipping the delivery service for #${t}`)}finally{e[a].loading=!1}},o=async(t,a,r,s,l,o,d,i,u,c,p,m)=>{const y=parseInt(t._hex,16),f={id:t,amount:a,deliveryFee:r,collateral:s,status:l,client:o,seller:d,deliveryService:i,orderContentsUrl:u,originZipCode:c,destinationZipCode:p,waitOnReady:m},v=await ie();if(e.every((e=>e.id!==y))){const t=await ga(f,"client",v.symmetric);return void(t&&(e.push(t),n.info(`Order #${y} is now ${va[l].name.toLowerCase()}`)))}const w=e.findIndex((e=>e.id===y));if(e[w].status.value<va[l].value){const t=await ga(f,"client",v.symmetric);t&&(e[w]=t,n.info(`Order #${y} is now ${va[l].name.toLowerCase()}`))}},d=async()=>{e.splice(0);const n=await ie();t.value=await $();const a=await wr(t.value,n.symmetric);e.push(...a);const{tom:r}=await P();r.removeAllListeners();const s=r.filters.OrderStatusChanged(null,null,null,null,null,t.value,null,null,null,null,null);r.on(s,o)};return(0,l.bv)(d),Z(d),{orders:e,cancel:a,receive:r,tip:s,OrderStatus:fa}},components:{Grid:Aa,OrderCard:_a,Button:mt,OrderInfo:vr,Input:St,MoneyInput:nn}};const _r=(0,N.Z)(Tr,[["render",Bn]]);var kr=_r;function Cr(e,t,n,a,r,s){const o=(0,l.up)("Sellers"),d=(0,l.up)("OrderPlacement");return"undefined"===typeof a.seller.id?((0,l.wg)(),(0,l.j4)(o,{key:0,onSelected:a.setSeller},null,8,["onSelected"])):((0,l.wg)(),(0,l.j4)(d,{key:1,seller:a.seller,onBack:a.unsetSeller},null,8,["seller","onBack"]))}const Or={key:0},Sr={class:"italic text-lg text-gray-700 font-semibold"},Ar=(0,l.Uk)(" No sellers available. Go to the "),Wr=(0,l.Uk)("Dashboard"),Dr=(0,l.Uk)(" and add one. ");function Ir(e,t,n,a,r,s){const o=(0,l.up)("router-link"),d=(0,l.up)("SellerCard"),i=(0,l.up)("Grid");return 0===a.sellers.length?((0,l.wg)(),(0,l.iD)("div",Or,[(0,l._)("p",Sr,[Ar,(0,l.Wm)(o,{to:"/dashboard",class:"text-yellow-700 underline"},{default:(0,l.w5)((()=>[Wr])),_:1}),Dr])])):((0,l.wg)(),(0,l.j4)(i,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.sellers,(e=>((0,l.wg)(),(0,l.j4)(d,{key:e.id,model:e,onClick:t=>a.select(e)},null,8,["model","onClick"])))),128))])),_:1}))}const Ur={class:"font-semibold text-gray-700 transition duration-100"},Vr={class:"absolute left-0 bottom-0 h-3/4 w-full"},jr={class:"h-full relative overflow-hidden"},Fr=["src"];function Mr(e,t,n,a,r,s){const o=(0,l.up)("Card");return(0,l.wg)(),(0,l.j4)(o,{class:"seller-card h-52 cursor-pointer"},{default:(0,l.w5)((()=>[(0,l._)("h2",Ur,(0,i.zw)(n.model.name),1),(0,l._)("div",Vr,[(0,l._)("div",jr,[(0,l._)("img",{src:n.model.imageUrl,class:"absolute left-0 bottom-0 h-full w-full rounded-b object-cover transition-transform duration-200"},null,8,Fr)])])])),_:1})}var Br={name:"SellerCard",props:{model:{type:Object,required:!0}},components:{Card:Qn}};const zr=(0,N.Z)(Br,[["render",Mr]]);var qr=zr,Hr={name:"Sellers",emits:["selected"],setup(e,t){const n=we(),a=e=>{t.emit("selected",e)};return{sellers:n,select:a}},components:{Grid:Aa,SellerCard:qr}};const Pr=(0,N.Z)(Hr,[["render",Ir]]);var $r=Pr;const Zr={class:"flex justify-between mb-6"},Er={class:"font-bold text-gray-700"};function Nr(e,t,n,a,r,s){const o=(0,l.up)("Button"),d=(0,l.up)("ProductList"),u=(0,l.up)("ShoppingCart"),c=(0,l.up)("Checkout");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Zr,[(0,l._)("h1",Er,(0,i.zw)(n.seller.name),1),(0,l.Wm)(o,{text:"❮ Back to sellers",class:"red transparent",onClick:a.back},null,8,["onClick"])]),(0,l.Wm)(d,{onAddToCart:a.addToCart},null,8,["onAddToCart"]),(0,l.Wm)(u,{cartContents:a.cartContents,onIncrement:a.increment,onDecrement:a.decrement,onRemove:a.remove},null,8,["cartContents","onIncrement","onDecrement","onRemove"]),(0,l.Wm)(c,{cartContents:a.cartContents,address:a.deliveryAddress,loading:a.loading,onCheckout:a.checkout},null,8,["cartContents","address","loading","onCheckout"])],64)}function Rr(e,t,n,a,r,s){const o=(0,l.up)("ProductCard"),d=(0,l.up)("Grid");return(0,l.wg)(),(0,l.j4)(d,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.products,(e=>((0,l.wg)(),(0,l.j4)(o,{key:e.id,product:e,onClick:t=>a.addToCart(e)},null,8,["product","onClick"])))),128))])),_:1})}const Lr={class:"absolute left-0 top-0 h-1/2 w-full"},Gr={class:"h-full relative overflow-hidden"},Yr=["src"],Kr={class:"flex justify-between content-center mt-24"},Jr={class:"text-lg font-medium text-gray-900"};function Qr(e,t,n,a,r,s){const o=(0,l.up)("Button"),d=(0,l.up)("Card");return(0,l.wg)(),(0,l.j4)(d,{class:"seller-card h-52 cursor-pointer bg-gray-200"},{default:(0,l.w5)((()=>[(0,l._)("div",Lr,[(0,l._)("div",Gr,[(0,l._)("img",{src:n.product.img,class:"absolute left-0 bottom-0 h-full w-full rounded-t object-cover transition-transform duration-200"},null,8,Yr)])]),(0,l._)("div",Kr,[(0,l._)("h3",null,(0,i.zw)(n.product.name),1),(0,l._)("span",Jr,"€ "+(0,i.zw)((Math.round(100*n.product.price)/100).toFixed(2)),1)]),(0,l.Wm)(o,{class:"mt-4 ml-auto w-36 blue transparent",text:"+ Add to cart",onClick:a.click},null,8,["onClick"])])),_:1})}var Xr={name:"ProductCard",emits:["click"],props:{product:{type:Object,required:!0}},setup(e,t){const n=()=>{t.emit("click")};return{click:n}},components:{Card:Qn,Button:mt}};const es=(0,N.Z)(Xr,[["render",Qr]]);var ts=es,ns={name:"ProductList",emits:["addToCart"],setup(e,t){const n=[{id:"cc919e21-ae5b-5e1f-d023-c40ee669520c",name:"TNO pizza",img:"https://images0.persgroep.net/rcs/5XA03cGALr-SKZ0BlzVGmD6vMo8/diocontent/114943802/_fitwidth/694/?appId=21791a8992982cd8da851550a453bd7f&quality=0.8",price:10},{id:"cc919e21-ae5b-5e1f-d023-c4ach669520c",name:"TNO burger",img:"https://assets.biggreenegg.eu/app/uploads/2019/03/28145521/topimage-classic-hamburger-2019m04-800x534.jpg",price:7.5}],a=e=>{t.emit("addToCart",e)};return{products:n,addToCart:a}},components:{Grid:Aa,ProductCard:ts}};const as=(0,N.Z)(ns,[["render",Rr]]);var rs=as;const ss={class:"w-full bg-white py-10"},ls={class:"flex justify-between border-b pb-8 mb-10"},os=(0,l._)("h2",{class:"font-semibold"},"Shopping Cart",-1),ds={class:"font-semibold"},is=(0,l.uE)('<div class="flex mb-5"><h3 class="font-semibold text-gray-600 text-xs uppercase w-2/5">Product Details</h3><h3 class="font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center">Quantity</h3><h3 class="font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center">Price</h3><h3 class="font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center">Total</h3></div>',1),us={key:0},cs={class:"flex w-2/5"},ps=["src"],ms={class:"flex flex-col justify-between ml-4 flex-grow"},ys={class:"font-bold text-sm"},fs=["onClick"],vs={class:"flex justify-center w-1/5"},ws=["onClick"],gs=(0,l._)("path",{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},null,-1),bs=[gs],hs=["value"],xs=["onClick"],Ts=(0,l._)("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},null,-1),_s=[Ts],ks={class:"text-center w-1/5 font-semibold text-sm"},Cs={class:"text-center w-1/5 font-semibold text-sm"};function Os(e,t,n,a,r,s){return(0,l.wg)(),(0,l.iD)("div",ss,[(0,l._)("div",ls,[os,(0,l._)("h2",ds,(0,i.zw)(n.cartContents.map((e=>e.quantity)).reduce(((e,t)=>e+t),0))+" Items",1)]),is,n.cartContents&&n.cartContents.length>0?((0,l.wg)(),(0,l.iD)("div",us,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.cartContents,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"flex items-center hover:bg-gray-100 -mx-8 px-6 py-5"},[(0,l._)("div",cs,[(0,l._)("div",null,[(0,l._)("img",{class:"h-24",src:e.img,alt:""},null,8,ps)]),(0,l._)("div",ms,[(0,l._)("span",ys,(0,i.zw)(e.name),1),(0,l._)("a",{href:"#",onClick:t=>a.remove(e.id),class:"font-semibold hover:text-red-500 text-gray-500 text-xs"},"Remove",8,fs)])]),(0,l._)("div",vs,[((0,l.wg)(),(0,l.iD)("svg",{onClick:t=>a.decrement(e.id),class:"fill-current text-gray-600 w-3",viewBox:"0 0 448 512"},bs,8,ws)),(0,l._)("input",{class:"mx-2 border text-center w-8",type:"text",value:e.quantity},null,8,hs),((0,l.wg)(),(0,l.iD)("svg",{onClick:t=>a.increment(e.id),class:"fill-current text-gray-600 w-3",viewBox:"0 0 448 512"},_s,8,xs))]),(0,l._)("span",ks,"€ "+(0,i.zw)((Math.round(100*e.price)/100).toFixed(2)),1),(0,l._)("span",Cs,"€ "+(0,i.zw)((Math.round(100*e.price*e.quantity)/100).toFixed(2)),1)])))),128))])):(0,l.kq)("",!0)])}var Ss={name:"ShoppingCart",props:{cartContents:{type:Array,default:[]}},emits:["increment","decrement","remove"],setup(e,t){const n=e=>{t.emit("increment",e)},a=e=>{t.emit("decrement",e)},r=e=>{t.emit("remove",e)};return{increment:n,decrement:a,remove:r}}};const As=(0,N.Z)(Ss,[["render",Os]]);var Ws=As;const Ds={id:"summary",class:"w-full py-10"},Is=(0,l._)("h2",{class:"font-semibold border-b pb-8"},"Checkout",-1),Us={class:"flex justify-between mt-10 mb-5"},Vs={class:"font-semibold text-sm uppercase"},js={class:"font-semibold text-sm"},Fs={class:"flex justify-between items-center border-t mt-8"},Ms={class:"flex font-semibold justify-between py-6 text-sm uppercase"},Bs=(0,l._)("span",null,"Total cost",-1);function zs(e,t,n,a,r,s){const o=(0,l.up)("AddressForm"),d=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)("div",Ds,[Is,(0,l._)("div",Us,[(0,l._)("span",Vs,"Items "+(0,i.zw)(a.itemAmount),1),(0,l._)("span",js,"€ "+(0,i.zw)(a.totalCost),1)]),(0,l.Wm)(o,{modelValue:n.address,"onUpdate:modelValue":t[0]||(t[0]=e=>n.address=e)},null,8,["modelValue"]),(0,l._)("div",Fs,[(0,l._)("div",Ms,[Bs,(0,l._)("span",null,"€ "+(0,i.zw)(a.totalCost),1)]),(0,l.Wm)(d,{onClick:a.checkout,text:"Order now!",class:"blue transparent",disabled:!a.isOrderValid,loading:n.loading},null,8,["onClick","disabled","loading"])])])}var qs={name:"Checkout",props:{cartContents:{type:Array,default:[]},address:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["checkout"],setup(e,t){const n=(0,l.Fl)((()=>e.cartContents.map((e=>e.quantity)).reduce(((e,t)=>e+t),0))),a=(0,l.Fl)((()=>(Math.round(100*e.cartContents.map((e=>e.quantity*e.price)).reduce(((e,t)=>e+t),0))/100).toFixed(2))),r=(0,l.Fl)((()=>e.address.street&&e.address.houseNumber&&e.address.zipCode&&n.value>0&&a.value>0)),s=()=>{r&&t.emit("checkout",{street:e.address.street,hnr:e.address.houseNumber,hnr_add:e.address.houseAddition,zip:e.address.zipCode})};return{itemAmount:n,totalCost:a,isOrderValid:r,checkout:s}},components:{Input:St,Button:mt,AddressForm:Vt}};const Hs=(0,N.Z)(qs,[["render",zs]]);var Ps=Hs,$s={name:"OrderPlacement",emits:["back"],props:{seller:{type:Object,required:!0}},setup(e,t){const n=(0,l.f3)("$toast"),a=(0,j.qj)([]),r=(0,j.qj)({street:void 0,houseNumber:void 0,houseAddition:void 0,zipCode:void 0}),s=(0,j.iH)(!1),o=()=>{t.emit("back")},d=e=>{0==a.filter((t=>t.id===e.id)).length?(e.quantity=1,a.push(e)):a.find((t=>t.id===e.id)).quantity++},i=e=>{a.find((t=>t.id===e)).quantity++},u=e=>{1==a.find((t=>t.id===e)).quantity?c(e):a.find((t=>t.id===e)).quantity--},c=e=>{const t=a.findIndex((t=>t.id===e));a.splice(t,1)},p=async t=>{s.value=!0;try{const l={cart:[...a],deliveryAddress:t},o=await ie(),d=await ia(e.seller.keys.public,o.public,o.private,o.symmetric,l),i=await ta(d),u=l.cart.reduce(((e,t)=>e+t.quantity*t.price),0),c=await $(),p=await on(c);if(p<u)return void n.error("Not enough EURT funds");const m=await sn(c);if(m<u&&!await rn(u))return void n.error("Error approving euro transaction");if(!await gr(e.seller.etherAddress,i,u))return void n.error("Failed to place the order");a.splice(0),r.street=r.houseNumber=r.houseAddition=r.zipCode=void 0}finally{s.value=!1}};return{cartContents:a,addToCart:d,increment:i,decrement:u,remove:c,checkout:p,deliveryAddress:r,loading:s,back:o}},components:{ProductList:rs,ShoppingCart:Ws,Checkout:Ps,Button:mt}};const Zs=(0,N.Z)($s,[["render",Nr]]);var Es=Zs,Ns={name:"NewOrder",setup(e,t){const n=(0,j.qj)({}),a=e=>{Object.assign(n,e)},r=()=>{Object.keys(n).forEach((e=>n[e]=void 0))};return{seller:n,setSeller:a,unsetSeller:r}},components:{Sellers:$r,OrderPlacement:Es}};const Rs=(0,N.Z)(Ns,[["render",Cr]]);var Ls=Rs,Gs={name:"Client",components:{StyledTabs:Wn,StyledTab:Vn,MyOrders:kr,NewOrder:Ls}};const Ys=(0,N.Z)(Gs,[["render",kn]]);var Ks=Ys;function Js(e,t,n,a,r,s){const o=(0,l.up)("PendingOrders"),d=(0,l.up)("StyledTab"),i=(0,l.up)("ActiveOrders"),u=(0,l.up)("OrderHistory"),c=(0,l.up)("StyledTabs");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"Pending orders"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{orders:a.orders.filter((e=>e.status.value===a.OrderStatus.Pending.value))},null,8,["orders"])])),_:1}),(0,l.Wm)(d,{name:"Active orders"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{orders:a.orders.filter((e=>a.OrderStatus.Approved.value<=e.status.value&&e.status.value<a.OrderStatus.Completed.value))},null,8,["orders"])])),_:1}),(0,l.Wm)(d,{name:"Order history"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{orders:a.orders.filter((e=>e.status.value===a.OrderStatus.Rejected.value||e.status.value===a.OrderStatus.Cancelled.value||e.status.value===a.OrderStatus.Completed.value))},null,8,["orders"])])),_:1})])),_:1})}const Qs={key:0},Xs=(0,l._)("p",{class:"italic text-lg text-gray-700 font-semibold"},"No orders yet. Hopefully someone places some soon!",-1),el=[Xs],tl={class:"flex flex-wrap justify-end gap-1 items-center"};function nl(e,t,n,a,r,s){const o=(0,l.up)("OrderInfo"),d=(0,l.up)("Button"),i=(0,l.up)("Input"),u=(0,l.up)("MoneyInput"),c=(0,l.up)("OrderCard"),p=(0,l.up)("Grid");return 0===n.orders.length?((0,l.wg)(),(0,l.iD)("div",Qs,el)):((0,l.wg)(),(0,l.j4)(p,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.orders,(e=>((0,l.wg)(),(0,l.j4)(c,{key:e.id,order:e,loading:e.loading},{contents:(0,l.w5)((()=>[(0,l.Wm)(o,{order:e,pov:"seller"},null,8,["order"])])),controls:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Reject",class:"red",onClick:t=>a.reject(e.id),disabled:e.loading},null,8,["onClick","disabled"]),(0,l._)("div",tl,[(0,l.Wm)(i,{type:"checkbox",title:"Wait on ready",class:"small",modelValue:e.waitOnReady,"onUpdate:modelValue":t=>e.waitOnReady=t},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(u,{title:"Collateral",class:"small",modelValue:e.collateral,"onUpdate:modelValue":t=>e.collateral=t},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(u,{title:"Delivery fee",class:"small",modelValue:e.deliveryFee,"onUpdate:modelValue":t=>e.deliveryFee=t},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(d,{text:"Approve",class:"green",onClick:t=>a.approve(e.id),disabled:e.loading||e.deliveryFee<=0},null,8,["onClick","disabled"])])])),_:2},1032,["order","loading"])))),128))])),_:1}))}const al=async(e,t=null)=>{const{tom:n}=await P(),a=await n.getOrdersBySeller(e),r=await wa(a,"seller",t);return r},rl=async(e,t,n,a,r,s)=>{try{const{tom:l}=await P(),o=an.fi(t.toString()),d=an.fi(n.toString()),i=await l.approveOrder(e,a,r,o,d,s,{gasLimit:ya});return await i.wait(),!0}catch(l){return console.log(l),!1}},sl=async e=>{try{const{tom:t}=await P(),n=await t.rejectOrder(e,{gasLimit:ya});return await n.wait(),!0}catch(t){return console.log(t),!1}},ll=async e=>{try{const{tom:t}=await P(),n=await t.transferOrder(e,{gasLimit:ya});return await n.wait(),!0}catch(t){return console.log(t),!1}},ol=async e=>{try{const{tom:t}=await P(),n=await t.preparedOrder(e,{gasLimit:ya});return await n.wait(),!0}catch(t){return console.log(t),!1}};var dl={name:"PendingOrders",props:{orders:{type:Array,required:!0}},setup(e){const t=(0,l.f3)("$toast"),n=async n=>{const a=e.orders.findIndex((e=>e.id===n));e.orders[a].loading=!0;try{const r=we().filter((t=>t.etherAddress===e.orders[a].seller)).pop(),s=r.address.zipCode,l=e.orders[a].orderInformation.deliveryAddress.zip,o=await rl(n,e.orders[a].deliveryFee,e.orders[a].collateral,s,l,e.orders[a].waitOnReady);o||t.error(`Error approving order #${n}`)}finally{e.orders[a].loading=!1}},a=async n=>{const a=e.orders.findIndex((e=>e.id===n));e.orders[a].loading=!0;try{const r=await sl(n);r||t.error(`Error rejecting order #${n}`)}finally{e.orders[a].loading=!1}};return{approve:n,reject:a}},components:{Grid:Aa,OrderCard:_a,OrderInfo:vr,Input:St,Button:mt,MoneyInput:nn}};const il=(0,N.Z)(dl,[["render",nl]]);var ul=il;const cl={key:0},pl=(0,l._)("p",{class:"italic text-lg text-gray-700 font-semibold"},"No active orders at the moment.",-1),ml=[pl];function yl(e,t,n,a,r,s){const o=(0,l.up)("OrderInfo"),d=(0,l.up)("Button"),i=(0,l.up)("OrderCard"),u=(0,l.up)("Grid");return 0===n.orders.length?((0,l.wg)(),(0,l.iD)("div",cl,ml)):((0,l.wg)(),(0,l.j4)(u,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.orders,(e=>((0,l.wg)(),(0,l.j4)(i,{key:e.id,order:e,loading:e.loading},(0,l.Nv)({contents:(0,l.w5)((()=>[(0,l.Wm)(o,{order:e,pov:"seller"},null,8,["order"])])),_:2},[e.waitOnReady&&e.status.value===a.OrderStatus.Accepted.value?{name:"controls",fn:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Ready",class:"blue",onClick:t=>a.prepared(e.id),disabled:e.loading},null,8,["onClick","disabled"])]))}:void 0,a.OrderStatus.Ready.value<=e.status.value&&e.status.value<a.OrderStatus.InTransit.value&&e.status.value!==a.OrderStatus.Transferred.value?{name:"controls",fn:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Transfer",class:"blue",onClick:t=>a.transfer(e.id),disabled:e.loading},null,8,["onClick","disabled"])]))}:void 0]),1032,["order","loading"])))),128))])),_:1}))}var fl={name:"ActiveOrders",props:{orders:{type:Array,required:!0}},setup(e){const t=(0,l.f3)("$toast"),n=async n=>{const a=e.orders.findIndex((e=>e.id===n));e.orders[a].loading=!0;try{const r=await ol(n);r||t.error(`Error preparing order #${n}`)}finally{e.orders[a].loading=!1}},a=async n=>{const a=e.orders.findIndex((e=>e.id===n));e.orders[a].loading=!0;try{const r=await ll(n);r||t.error(`Error transferring order #${n}`)}finally{e.orders[a].loading=!1}};return{prepared:n,transfer:a,OrderStatus:fa}},components:{Grid:Aa,OrderCard:_a,OrderInfo:vr,Button:mt}};const vl=(0,N.Z)(fl,[["render",yl]]);var wl=vl;const gl={key:0},bl=(0,l._)("p",{class:"italic text-lg text-gray-700 font-semibold"},"History is empty.",-1),hl=[bl];function xl(e,t,n,a,r,s){const o=(0,l.up)("OrderInfo"),d=(0,l.up)("OrderCard"),i=(0,l.up)("Grid");return 0===n.orders.length?((0,l.wg)(),(0,l.iD)("div",gl,hl)):((0,l.wg)(),(0,l.j4)(i,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.orders,(e=>((0,l.wg)(),(0,l.j4)(d,{key:e.id,order:e,loading:e.loading},{contents:(0,l.w5)((()=>[(0,l.Wm)(o,{order:e,pov:"seller"},null,8,["order"])])),_:2},1032,["order","loading"])))),128))])),_:1}))}var Tl={name:"OrderHistory",props:{orders:{type:Array,required:!0}},components:{Grid:Aa,OrderCard:_a,OrderInfo:vr}};const _l=(0,N.Z)(Tl,[["render",xl]]);var kl=_l,Cl={name:"Seller",setup(){const e=(0,l.f3)("$toast"),t=(0,j.qj)([]);let n=(0,j.iH)("");const a=async(n,a,r,s,l,o,d,i,u,c,p,m)=>{const y=parseInt(n._hex,16),f={id:n,amount:a,deliveryFee:r,collateral:s,status:l,client:o,seller:d,deliveryService:i,orderContentsUrl:u,originZipCode:c,destinationZipCode:p,waitOnReady:m},v=await ie();if(t.every((e=>e.id!==y))){const n=await ga(f,"seller",v.private);return void(n&&(t.push(n),e.info(`Order #${y} is now ${va[l].name.toLowerCase()}`)))}const w=t.findIndex((e=>e.id===y));if(t[w].status.value<va[l].value){const n=await ga(f,"seller",v.private);n&&(t[w]=n,e.info(`Order #${y} is now ${va[l].name.toLowerCase()}`))}},r=async()=>{t.splice(0);const e=await ie();n.value=await $();const r=await al(n.value,e.private);t.push(...r);const{tom:s}=await P();s.removeAllListeners();const l=s.filters.OrderStatusChanged(null,null,null,null,null,null,n.value,null,null,null,null);s.on(l,a)};return(0,l.bv)(r),Z(r),{orders:t,OrderStatus:fa}},components:{StyledTabs:Wn,StyledTab:Vn,PendingOrders:ul,ActiveOrders:wl,OrderHistory:kl}};const Ol=(0,N.Z)(Cl,[["render",Js]]);var Sl=Ol;function Al(e,t,n,a,r,s){const o=(0,l.up)("AvailableOrders"),d=(0,l.up)("StyledTab"),i=(0,l.up)("ActiveOrders"),u=(0,l.up)("OrderHistory"),c=(0,l.up)("StyledTabs");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"Available orders"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{orders:a.orders.filter((e=>e.status.value===a.OrderStatus.Approved.value)),address:a.address},null,8,["orders","address"])])),_:1}),(0,l.Wm)(d,{name:"Active orders"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{orders:a.orders.filter((e=>a.OrderStatus.Accepted.value<=e.status.value&&e.status.value<a.OrderStatus.Completed.value))},null,8,["orders"])])),_:1}),(0,l.Wm)(d,{name:"Order history"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{orders:a.orders.filter((e=>e.status.value===a.OrderStatus.Completed.value))},null,8,["orders"])])),_:1})])),_:1})}const Wl={key:0},Dl=(0,l._)("p",{class:"italic text-lg text-gray-700 font-semibold"},"No available orders for pick up. Hopefully the situation changes soon!",-1),Il=[Dl];function Ul(e,t,n,a,r,s){const o=(0,l.up)("OrderInfo"),d=(0,l.up)("Button"),i=(0,l.up)("OrderCard"),u=(0,l.up)("Grid");return 0===n.orders.length?((0,l.wg)(),(0,l.iD)("div",Wl,Il)):((0,l.wg)(),(0,l.j4)(u,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.orders,(e=>((0,l.wg)(),(0,l.j4)(i,{key:e.id,order:e,loading:e.loading},{contents:(0,l.w5)((()=>[(0,l.Wm)(o,{order:e,pov:"delivery"},null,8,["order"])])),controls:(0,l.w5)((()=>[(0,l.Wm)(d,{text:"Accept",class:"green",onClick:t=>a.accept(e.id),disabled:e.loading},null,8,["onClick","disabled"])])),_:2},1032,["order","loading"])))),128))])),_:1}))}const Vl=async e=>{const{tom:t}=await P(),n=await t.getOrdersByDeliveryService(e);return wa(n,"delivery")},jl=async()=>{const{tom:e}=await P(),t=await e.getApprovedOrders();return wa(t)},Fl=async e=>{try{const{tom:t}=await P(),n=await t.acceptOrder(e,{gasLimit:ya});return await n.wait(),!0}catch(t){return console.log(t),!1}},Ml=async e=>{try{const{tom:t}=await P(),n=await t.transferOrder(e,{gasLimit:ya});return await n.wait(),!0}catch(t){return console.log(t),!1}},Bl=async e=>{try{const{tom:t}=await P(),n=await t.completeOrder(e,{gasLimit:ya});return await n.wait(),!0}catch(t){return console.log(t),!1}};var zl={name:"AvailableOrders",props:{orders:{type:Array,required:!0},address:{type:String,required:!0}},setup(e){const t=(0,l.f3)("$toast"),n=async n=>{const a=e.orders.findIndex((e=>e.id===n));e.orders[a].loading=!0;try{const r=await on(e.address);if(r<e.orders[a].collateral)return void t.error("Not enough EURT funds");const s=await sn(e.address);if(s<e.orders[a].collateral&&!await rn(e.orders[a].collateral))return t.error(`Error approving euro transaction #${n}`),void(e.orders[a].loading=!1);await Fl(n)||t.error(`Error accepting order #${n}`)}finally{e.orders[a].loading=!1}};return{accept:n}},components:{Grid:Aa,OrderCard:_a,OrderInfo:vr,Button:mt}};const ql=(0,N.Z)(zl,[["render",Ul]]);var Hl=ql;const Pl={key:0},$l=(0,l._)("p",{class:"italic text-lg text-gray-700 font-semibold"},"No active orders at the moment.",-1),Zl=[$l];function El(e,t,n,a,r,s){const o=(0,l.up)("AddressValidator"),d=(0,l.up)("OrderInfo"),i=(0,l.up)("Button"),u=(0,l.up)("OrderCard"),c=(0,l.up)("Grid");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(o,{class:"mb-8"}),0===n.orders.length?((0,l.wg)(),(0,l.iD)("div",Pl,Zl)):((0,l.wg)(),(0,l.j4)(c,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.orders,(e=>((0,l.wg)(),(0,l.j4)(u,{key:e.id,order:e,loading:e.loading},(0,l.Nv)({contents:(0,l.w5)((()=>[(0,l.Wm)(d,{order:e,pov:"delivery"},null,8,["order"])])),_:2},[a.OrderStatus.Ready.value<=e.status.value&&e.status.value<a.OrderStatus.InTransit.value&&e.status.value!==a.OrderStatus.PickedUp.value?{name:"controls",fn:(0,l.w5)((()=>[(0,l.Wm)(i,{text:"Pick up",class:"blue",onClick:t=>a.pickup(e.id),disabled:e.loading},null,8,["onClick","disabled"])]))}:a.OrderStatus.InTransit.value<=e.status.value&&e.status.value<a.OrderStatus.Completed.value&&e.status.value!==a.OrderStatus.Delivered.value?{name:"controls",fn:(0,l.w5)((()=>[(0,l.Wm)(i,{text:"Deliver",class:"blue",onClick:t=>a.deliver(e.id),disabled:e.loading},null,8,["onClick","disabled"])]))}:void 0]),1032,["order","loading"])))),128))])),_:1}))],64)}const Nl={class:"flex flex-wrap gap-4 items-end"},Rl={class:"ml-1 w-2"},Ll={key:0},Gl={key:0,class:"text-lg text-green-500"},Yl={key:1,class:"text-lg text-red-500"};function Kl(e,t,n,a,r,s){const o=(0,l.up)("Input"),d=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)("div",Nl,[(0,l.Wm)(o,{modelValue:a.address,"onUpdate:modelValue":t[0]||(t[0]=e=>a.address=e),type:"text",title:"Address",placeholder:"Address without separators and spaces",class:"w-64"},null,8,["modelValue"]),(0,l.Wm)(o,{modelValue:a.salt,"onUpdate:modelValue":t[1]||(t[1]=e=>a.salt=e),type:"text",title:"Salt",placeholder:"Provided by the seller",class:"w-36"},null,8,["modelValue"]),(0,l.Wm)(o,{modelValue:a.hash,"onUpdate:modelValue":t[2]||(t[2]=e=>a.hash=e),type:"text",title:"Hash",placeholder:"Copy and paste from the respective order",class:"w-48 grow"},null,8,["modelValue"]),(0,l.Wm)(d,{text:"Validate",class:"blue",disabled:!a.address||!a.salt||!a.hash,onClick:a.validateHash},null,8,["disabled","onClick"]),(0,l._)("div",Rl,[a.hashValidated?((0,l.wg)(),(0,l.iD)("div",Ll,[a.isHashValid?((0,l.wg)(),(0,l.iD)("span",Gl,"✓")):((0,l.wg)(),(0,l.iD)("span",Yl,"✗"))])):(0,l.kq)("",!0)])])}var Jl={name:"AddressValidator",setup(){const e=(0,j.iH)(""),t=(0,j.iH)(""),n=(0,j.iH)(""),a=(0,j.iH)(!1),r=(0,j.iH)(!1),s=async()=>{e.value&&t.value&&n.value&&(a.value=await pa(e.value,t.value,n.value),r.value=!0)};return{address:e,salt:t,hash:n,isHashValid:a,validateHash:s,hashValidated:r}},components:{Button:mt,Input:St}};const Ql=(0,N.Z)(Jl,[["render",Kl]]);var Xl=Ql,eo={name:"ActiveOrders",props:{orders:{type:Array,required:!0}},setup(e){const t=async t=>{const n=e.orders.findIndex((e=>e.id===t));e.orders[n].loading=!0;try{const a=await Ml(t);a||toast.error(`Error picking up order #${t}`)}finally{e.orders[n].loading=!1}},n=async t=>{const n=e.orders.findIndex((e=>e.id===t));e.orders[n].loading=!0;try{const a=await Bl(t);a||toast.error(`Error delivering order #${t}`)}finally{e.orders[n].loading=!1}};return{pickup:t,deliver:n,OrderStatus:fa}},components:{Grid:Aa,OrderCard:_a,OrderInfo:vr,Button:mt,AddressValidator:Xl}};const to=(0,N.Z)(eo,[["render",El]]);var no=to;const ao={key:0},ro=(0,l._)("p",{class:"italic text-lg text-gray-700 font-semibold"},"History is empty.",-1),so=[ro];function lo(e,t,n,a,r,s){const o=(0,l.up)("OrderInfo"),d=(0,l.up)("OrderCard"),i=(0,l.up)("Grid");return 0===n.orders.length?((0,l.wg)(),(0,l.iD)("div",ao,so)):((0,l.wg)(),(0,l.j4)(i,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.orders,(e=>((0,l.wg)(),(0,l.j4)(d,{key:e.id,order:e,loading:e.loading},{contents:(0,l.w5)((()=>[(0,l.Wm)(o,{order:e,pov:"delivery"},null,8,["order"])])),_:2},1032,["order","loading"])))),128))])),_:1}))}var oo={name:"OrderHistory",props:{orders:{type:Array,required:!0}},components:{Grid:Aa,OrderCard:_a,OrderInfo:vr}};const io=(0,N.Z)(oo,[["render",lo]]);var uo=io,co={name:"Delivery",setup(){const e=(0,l.f3)("$toast"),t=(0,j.qj)([]),n=(0,j.iH)(""),a=async(n,a,r,s,l,o,d,i,u,c,p,m)=>{const y=parseInt(n._hex,16),f={id:n,amount:a,deliveryFee:r,collateral:s,status:l,client:o,seller:d,deliveryService:i,orderContentsUrl:u,originZipCode:c,destinationZipCode:p,waitOnReady:m};if(t.every((e=>e.id!==y))){const n=await ga(f,"delivery");return void(n&&(t.push(n),e.info(`Order #${y} is now ${va[l].name.toLowerCase()}`)))}const v=t.findIndex((e=>e.id===y));if(t[v].status.value<va[l].value){const n=await ga(f,"delivery");n&&(t[v]=n,e.info(`Order #${y} is now ${va[l].name.toLowerCase()}`))}},r=async()=>{t.splice(0),n.value=await $();const e=await Vl(n.value);t.push(...e);const r=await jl();t.push(...r);const{tom:s}=await P();s.removeAllListeners();const l=s.filters.OrderStatusChanged(null,null,null,null,null,null,null,n.value,null,null,null);s.on(l,a);const o=s.filters.ApprovedOrder(null,null,null,null,fa.Approved.value,null,null,null,null,null,null);s.on(o,a)};return(0,l.bv)(r),Z(r),{orders:t,address:n,OrderStatus:fa}},components:{StyledTabs:Wn,StyledTab:Vn,AvailableOrders:Hl,ActiveOrders:no,OrderHistory:uo}};const po=(0,N.Z)(co,[["render",Al]]);var mo=po;const yo={class:"flex flex-col space-y-4"},fo={clas:"mb-4"},vo=(0,l._)("h1",{class:"mb-2"},"Buttons",-1),wo={class:"grid grid-cols-4 gap-4"},go={clas:"mb-4"},bo=(0,l._)("h1",{class:"mb-2"},"Cards",-1),ho={class:"grid grid-cols-4 gap-4"},xo=(0,l._)("p",null,"This is what the seller sees",-1),To=(0,l._)("p",null,"This is what the delivery service sees",-1),_o=(0,l._)("p",null,"This a cancelled order",-1),ko=(0,l._)("p",null,"This is a completed",-1),Co=(0,l._)("p",null,"This is a disputed order",-1),Oo=(0,l._)("p",null,"This is a disputed order",-1);function So(e,t,n,a,r,s){const o=(0,l.up)("Button"),d=(0,l.up)("OrderCard");return(0,l.wg)(),(0,l.iD)("div",yo,[(0,l._)("div",fo,[vo,(0,l._)("div",wo,[(0,l.Wm)(o,{text:"Green button",class:"green"}),(0,l.Wm)(o,{text:"Blue button",class:"blue"}),(0,l.Wm)(o,{text:"Red button",class:"red"}),(0,l.Wm)(o,{text:"Disabled button",disabled:!0}),(0,l.Wm)(o,{text:"Green transparent button",class:"green transparent"}),(0,l.Wm)(o,{text:"Blue transparent button",class:"blue transparent"}),(0,l.Wm)(o,{text:"Red transparent button",class:"red transparent"}),(0,l.Wm)(o,{text:"Disabled transparent button",class:"red transparent",disabled:!0}),(0,l.Wm)(o,{text:"Green small button",class:"green small"}),(0,l.Wm)(o,{text:"Blue small button",class:"blue small"}),(0,l.Wm)(o,{text:"Red small button",class:"red small"}),(0,l.Wm)(o,{text:"Disabled small button",class:"red small",disabled:!0}),(0,l.Wm)(o,{text:"Green trans. small button",class:"green transparent small"}),(0,l.Wm)(o,{text:"Blue trans. small button",class:"blue transparent small"}),(0,l.Wm)(o,{text:"Red trans. small button",class:"red transparent small"}),(0,l.Wm)(o,{text:"Disabled trans. small button",class:"red transparent small",disabled:!0}),(0,l.Wm)(o,{text:"Default button"})])]),(0,l._)("div",go,[bo,(0,l._)("div",ho,[(0,l.Wm)(d,{order:a.order1},{contents:(0,l.w5)((()=>[xo])),controls:(0,l.w5)((()=>[(0,l.Wm)(o,{text:"Reject",class:"red"}),(0,l.Wm)(o,{text:"Approve",class:"green"})])),_:1},8,["order"]),(0,l.Wm)(d,{order:a.order2},{contents:(0,l.w5)((()=>[To])),controls:(0,l.w5)((()=>[(0,l.Wm)(o,{text:"Accept",class:"green"})])),_:1},8,["order"]),(0,l.Wm)(d,{order:a.order3},{contents:(0,l.w5)((()=>[_o])),_:1},8,["order"]),(0,l.Wm)(d,{order:a.order4},{contents:(0,l.w5)((()=>[ko])),_:1},8,["order"]),(0,l.Wm)(d,{order:a.order5},{contents:(0,l.w5)((()=>[Co])),_:1},8,["order"]),(0,l.Wm)(d,{order:a.order1,loading:"true"},{contents:(0,l.w5)((()=>[Oo])),_:1},8,["order"])])])])}var Ao={name:"Dashboard",setup(){const e=(0,l.f3)("$toast");e.success("Order placed."),e.error("Error submitting order."),e.warning("Warning order."),e.info("Updated order status.");const t={id:1,status:fa.Pending},n={id:2,status:fa.Approved},a={id:3,status:fa.Cancelled},r={id:4,status:fa.Completed},s={id:5,status:fa.Disputed};return{order1:t,order2:n,order3:a,order4:r,order5:s}},components:{Button:mt,OrderCard:_a}};const Wo=(0,N.Z)(Ao,[["render",So]]);var Do=Wo;const Io="/tom",Uo=[{path:`${Io}/`,name:"Home",component:je,meta:{title:"Home"}},{path:`${Io}/dashboard`,name:"Dashboard",component:_n,meta:{title:"Dashboard"}},{path:`${Io}/seller`,name:"Seller",component:Sl,meta:{title:"Seller"}},{path:`${Io}/delivery`,name:"Delivery",component:mo,meta:{title:"Delivery"}},{path:`${Io}/client`,name:"Client",component:Ks,meta:{title:"Client"}},{path:`${Io}/styles`,name:"Styles",component:Do,meta:{title:"Styles"}}],Vo=(0,Oe.p7)({history:(0,Oe.PO)(),routes:Uo});Vo.beforeEach(((e,t,n)=>{document.title=`${e.meta.title}`,n()}));var jo=Vo;(0,a.ri)(Ce).use(jo).use(s()).mount("#app")},6601:function(){},1679:function(){},8795:function(){},5024:function(){}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,a,r,s){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],s=e[u][2];for(var o=!0,d=0;d<a.length;d++)(!1&s||l>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[d])}))?a.splice(d--,1):(o=!1,s<l&&(l=s));if(o){e.splice(u--,1);var i=r();void 0!==i&&(t=i)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[a,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var s=Object.create(null);n.r(s);var l={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&a;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){l[e]=function(){return a[e]}}));return l["default"]=function(){return a},n.d(s,l),s}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,s,l=a[0],o=a[1],d=a[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(d)var u=d(n)}for(t&&t(a);i<l.length;i++)s=l[i],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},a=self["webpackChunktom_frontend"]=self["webpackChunktom_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(3012)}));a=n.O(a)})();
//# sourceMappingURL=app.cbc86c41.js.map